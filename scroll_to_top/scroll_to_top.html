<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
    <title></title>
    <!--<script type="text/javascript" src="../libs/jquery/jquery-1.9.1.min.js"></script>-->

</head>
<body>
    <div>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <div style="height: 7500px;">
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
        </div>
    </div>

</body>
<script type="text/javascript">


    var scroll_toTop = function (h_scroll) {
        this.initialize(h_scroll);
    };
    scroll_toTop.prototype = {
        initialize:function(h_scroll){
            h_scroll ? this.height = h_scroll : this.height = 400;

            !-[1,] ? this.isIE = true : this.isIE = false;




            this.creatDiv();

            var flag_fade = "hide";
//           var flag_fade = this.flag_fade;
           var oDiv = this.div;
           var _isIE = this.isIE;
           var num_fadeIn = 0;
           var num_fadeOut = 10;
           var timer_fadeIn,timer_fadeOut;

            window.onscroll = function(){
                var _scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
                if(_scrollTop > h_scroll){
                    if(_isIE && oDiv.style.filter == "alpha(opacity=0)"){

                        flag_fade == "hide" ? num_fadeIn = 0 : num_fadeIn;


                        timer_fadeIn = setInterval(function(){
                            if (num_fadeIn>10){
                                clearInterval(timer_fadeIn);
                            } else {

                                oDiv.style.filter = "alpha(opacity=" + num_fadeIn*10 + ")";
                                num_fadeIn++;
                            }
                        },500);


                        flag_fade = "show";

                    } else if(oDiv.style.opacity == "0") {

                        flag_fade == "hide" ? num_fadeIn = 0 : num_fadeIn;
                        function animate_fadeIn(){
                            if (num_fadeIn>10){
                                clearInterval(timer_fadeIn);
//                                flag_fade = "show";
                            } else {
                                oDiv.style.opacity = num_fadeIn / 10;
//                                console.log("show",oDiv.style.opacity,timer_fadeIn,num_fadeIn);
                                num_fadeIn++;
                            }
                        }
                        timer_fadeIn = setInterval(animate_fadeIn,500);
                        flag_fade = "show";
                    }

                } else {
                    if(oDiv.style.filter == "alpha(opacity=100)"){
                        flag_fade == "show" ? num_fadeOut = 10 : num_fadeOut;


                        timer_fadeOut = setInterval(function(){
                            if (num_fadeOut<0){
                                clearInterval(timer_fadeOut);
                            } else {
                                oDiv.style.filter = "alpha(opacity=" + num_fadeOut*10 + ")";
                                num_fadeOut--;
                            }
                        },500);


                        flag_fade = "hide";
                    } else if(oDiv.style.opacity == "1") {
                        flag_fade == "show" ? num_fadeOut = 10 : num_fadeOut;
                        function animate_fadeOut(){
                            if (num_fadeOut<0){
                                clearInterval(timer_fadeOut);
//                                flag_fade = false;
                            } else {
                                oDiv.style.opacity = num_fadeOut / 10;
                                num_fadeOut--;
                            }
                        }
                        timer_fadeOut  = setInterval(animate_fadeOut,500);
                        flag_fade = "hide";
                    }
                    /*if(oDiv.style.opacity == 1 || oDiv.style.filter == "alpha(opacity=100)"){
                        timer_fadeOut  = setInterval(animate_fadeOut,100);
                        function animate_fadeOut(){
                            if (num_fadeOut<=0){
                                clearInterval(timer_fadeOut);
//                                flag_fade = false;
                                num_fadeOut = 10;
                            } else {
                                oDiv.style.opacity = num_fadeOut / 10;
                                if(_isIE){
                                    oDiv.style.filter = "alpha(opacity=" + num_fadeOut*10 + ")";
                                }
                                console.log("hide",oDiv.style.opacity,timer_fadeOut,num_fadeOut);

                                num_fadeOut--;
                            }
                        }
                    }*/
                }
            }
        },
        creatDiv:function(){
            var scrollToTop = this.scrollToTop;
            var isIE = this.isIE;
            var oDiv = document.createElement("div");
            oDiv.setAttribute("id","div_scroll");


            var styleData = 'opacity: 0; filter:alpha(opacity=0); width: 40px; height: 40px; background: url(scroll_to_top.png) 0 0 no-repeat; position:fixed; right: 50px; bottom: 100px; cursor : pointer; z-index:100; ';

            if(isIE){
                oDiv.style.setAttribute('cssText', styleData);
            } else {
                oDiv.setAttribute('style', styleData);
            }

            document.getElementsByTagName("body")[0].appendChild(oDiv);
            oDiv.onclick = scrollToTop;

            oDiv.onmouseover = function(){
                this.style.background = "url(over_scroll_to_top.png) 0 0 no-repeat";
            }
            oDiv.onmouseout = function(){
                this.style.background = "url(scroll_to_top.png) 0 0 no-repeat";
            }
            this.div = oDiv;
        },
        fadeIn:function(elem,timer_fadeIn){
           /* this.timer_fadeIn = setInterval(animate_fadeIn,100);
            var num_fadeIn = 0;
            function animate_fadeIn(){
                if (num_fadeIn>10){
                    clearInterval(this.timer_fadeIn);
                    this.flag_fade = "show";
                } else {
                    elem.style.opacity = num_fadeIn / 10;
                    if(this.isIE){
                        elem.style.filter = "alpha(opacity=" + num_fadeIn*10 + ")";
                    }
                    num_fadeIn++;
                }
            }*/
//            console.log(this.timer_fadeIn);
        },
        fadeOut:function(elem){
           /* this.timer_fadeOut  = setInterval(animate_fadeOut,100);
            var num_fadeOut = 10;
            function animate_fadeOut(){
                if (num_fadeOut<0){
                    clearInterval(this.timer_fadeOut);
                    this.flag_fade = false;
                } else {
                    elem.style.opacity = num_fadeOut / 10;
                    if(this.isIE){
                        elem.style.filter = "alpha(opacity=" + num_fadeOut*10 + ")";
                    }
                    num_fadeOut--;
                }
            }*/
//            console.log(this.timer_fadeOut);
        },
        scrollToTop:function(){
            var timer_scrollToTop = setInterval(animate_scrollToTop,100);
            function animate_scrollToTop(){
                var num_scrollToTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
                num_scrollToTop = num_scrollToTop - num_scrollToTop * 0.3;
                if (num_scrollToTop<=0){
                    clearInterval(timer_scrollToTop);
                } else {
                    if(document.documentElement.scrollTop){
                        document.documentElement.scrollTop = num_scrollToTop;
                    } else {
                        document.body.scrollTop = num_scrollToTop;
                    }
                }
            }
        }
       /* ,
        animate:function(elem,type,animateWanChen){
            switch(type){
               case "fadeIn":

               break;
               case "fadeOut":


               break;
               case "scrollToTop":

               break;

           }
        }*/


    }

    window.onload =   new scroll_toTop(700);


</script>
</html>